# Калькулятор слабейших предусловий

## Суть программы

Программа вычисляет слабейшие предусловия для простых программ. Слабейшее предусловие (Weakest Precondition, WP) - это условие, которое должно быть выполнено в начале программы, чтобы гарантированно получить нужный результат в конце.

Простыми словами: "Что должно быть истинно в начале, чтобы в конце получилось то, что мы хотим?"

## Как использовать

### Ввод фрагментов программы

Программа поддерживает три типа операторов:

**1. Присваивание:**
```
x := 5
max := x + y
result := (a + b) * 2
```

**2. Условный оператор:**
```
if (x > 0) { y := x } else { y := -x }
if (a >= b) { max := a } else { max := b }
```

**3. Последовательность операторов (разделяется точкой с запятой):**
```
x := x + 1; y := x * 2
a := 10; b := a + 5; c := a * b
```

### Ввод постусловий

Постусловие - это условие, которое должно быть выполнено в конце программы.

**Операторы сравнения:**
- `>` больше
- `<` меньше  
- `>=` больше или равно
- `<=` меньше или равно
- `==` равно
- `!=` не равно

**Логические операторы:**
- `&&` логическое И (оба условия должны быть истинны)
- `||` логическое ИЛИ (хотя бы одно условие должно быть истинно)

**Примеры постусловий:**
```
x > 15
max >= 100
y == 10
x > 0 && y > 0
result > 20 || result < -5
```

### Как читать результат

Программа показывает пошаговое вычисление:

1. **Исходные данные** - ваша программа и постусловие
2. **Пошаговые вычисления** - как программа обрабатывает каждый оператор
3. **Итоговое предусловие** - условие, которое должно выполняться в начале
4. **Человеко-читаемое объяснение** - объяснение каждого шага на русском языке

**Пример:**
- Программа: `x := x + 10`
- Постусловие: `x > 15`
- Результат WP: `(x + 10) > 15`, что означает `x > 5`

## Автотесты

Программа включает в себя два типа тестов:

### 1. Юнит-тесты (для разработчиков)

Проверяют корректность работы всех компонентов программы:
- Математические выражения
- Логические условия  
- Алгоритмы вычисления WP
- Парсинг входного кода

**Запуск юнит-тестов:**
```
cd TestProject1
dotnet test
```

### 2. Интеграционные тесты (проверка гарантий)

Программа автоматически проверяет, что вычисленные предусловия действительно гарантируют выполнение постусловий. Для простых программ выбираются случайные значения переменных, которые удовлетворяют предусловию, затем выполняется программа и проверяется, что постусловие выполнилось.

**Примеры проверок:**
1. Программа: `x := x + 5`, Постусловие: `x > 10`
   - WP: `x + 5 > 10` (то есть `x > 5`)
   - Тест: берем `x = 7` (удовлетворяет `x > 5`)
   - Выполняем: `x = 7 + 5 = 12`
   - Проверяем: `12 > 10` - истина

2. Программа: `if (x >= 0) { y := x } else { y := -x }`, Постусловие: `y > 3`
   - WP: `(x >= 0 && x > 3) || (x < 0 && -x > 3)`
   - Тест: берем `x = 5` и `x = -5`
   - Проверяем результаты

## Технические требования

### Системные требования:
- Windows 7 или новее
- .NET 8.0 Runtime или .NET 8.0 SDK для разработки

### Минимальные характеристики:
- 1 ГБ RAM  
- 100 МБ свободного места на диске
- Экран с разрешением 800x600 или выше

### Поддерживаемые конструкции:
- Переменные: любые буквенно-цифровые имена (x, var1, result)
- Числа: целые и десятичные (5, 3.14, -10)
- Операции: +, -, *, / (деление на ноль обрабатывается)
- Скобки для группировки: (a + b) * c
- Условия: все стандартные операторы сравнения
- Логические операции: && (И), || (ИЛИ)

### Ограничения:
- Циклы не поддерживаются
- Массивы и структуры данных не поддерживаются
- Функции не поддерживаются
- Максимальная сложность выражения: 10 уровней вложенности

## Как запустить

Вариант 1: Через Visual Studio (рекомендуемый)
1. Установка Visual Studio
Скачайте Visual Studio 2022 Community
При установке выберите рабочую нагрузку "Разработка классических приложений .NET"
2. Клонирование репозитория
```
git clone https://github.com/alekseev666/lab2.git
```
Запустите Visual Studio
Выберите "Open a project or solution"
Найдите файл lab2.sln в папке проекта и откройте его
Дождитесь загрузки проекта и восстановления пакетов NuGet

3. Запуск
Нажмите F5 или кнопку "Start" (зеленая стрелка)
Или через меню: Debug → Start Debugging

Вариант 2: Через Visual Studio Code
Откройте папку проекта в VS Code
Нажмите Ctrl+Shift+P → "OmniSharp: Select Project"
Выберите файл lab2.csproj
Нажмите F5 для запуска

## Примеры использования

### Пример 1: Простое присваивание
- Код: `x := 2 * x + 5`
- Постусловие: `x > 15`  
- Результат: `2 * x + 5 > 15`, упрощенно `x > 5`

### Пример 2: Условие
- Код: `if (x >= 0) { max := x } else { max := -x }`
- Постусловие: `max > 100`
- Результат: `(x >= 0 && x > 100) || (x < 0 && -x > 100)`

### Пример 3: Последовательность
- Код: `a := a + 1; b := a * 2`  
- Постусловие: `b > 20`
- Результат: `(a + 1) * 2 > 20`, упрощенно `a > 9`


